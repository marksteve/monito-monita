!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},i={},n={}.hasOwnProperty,s=/^\.\.?(\/|$)/,o=function(e,t){for(var r,i=[],n=(s.test(t)?e+"/"+t:t).split("/"),o=0,u=n.length;o<u;o++)r=n[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},a=function(t){return function(r){var i=o(u(t),r);return e.require(i,t)}},l=function(e,t){var i=null;i=v&&v.createHot(e);var n={id:e,exports:{},hot:i};return r[e]=n,t(n.exports,a(e),n),n.exports},c=function(e){return i[e]?c(i[e]):e},h=function(e,t){return c(o(u(e),t))},p=function(e,i){null==i&&(i="/");var s=c(e);if(n.call(r,s))return r[s].exports;if(n.call(t,s))return l(s,t[s]);throw new Error("Cannot find module '"+e+"' from '"+i+"'")};p.alias=function(e,t){i[t]=e};var d=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,m=function(e){if(d.test(e)){var t=e.replace(d,"");n.call(i,t)&&i[t].replace(d,"")!==t+"/index"||(i[t]=e)}if(f.test(e)){var r=e.replace(f,"");n.call(i,r)||(i[r]=e)}};p.register=p.define=function(e,i){if("object"==typeof e)for(var s in e)n.call(e,s)&&p.register(s,e[s]);else t[e]=i,delete r[e],m(e)},p.list=function(){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e};var v=e._hmr&&new e._hmr(h,p,t,r);p._cache=r,p.hmr=v&&v.wrap,p.brunch=!0,e.require=p}}(),function(){var e;window;require.register("js/app.js",function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var n=t("vue"),s=i(n),o=t("vue-router"),u=i(o),a=t("vuefire"),l=i(a),c=t("./components/index"),h=i(c),p=t("./components/group"),d=i(p);s["default"].use(u["default"]),s["default"].use(l["default"]);var f=[{path:"/",component:h["default"]},{path:"/:groupId",component:d["default"]}],m=new u["default"]({routes:f}),v=new s["default"]({router:m,data:{user:null},render:function(e){return e("router-view",{attrs:{user:this.user}},[])}});window.firebase.auth().onAuthStateChanged(function(e){v.user=e}),v.$mount("#app")}),require.register("js/components/group.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window,n=i.firebase;e["default"]={props:["user"],data:function(){return{group:null,members:{},membersList:[],userIsMember:!1,userIsOwner:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData",user:"checkMembership",members:"checkMembership"},computed:{membersList:function(){var e=this;return this.members?Object.keys(this.members).map(function(t){return e.members[t]}):[]}},methods:{login:function(){var e=new n.auth.FacebookAuthProvider;n.auth().signInWithPopup(e)},logout:function(e){e.preventDefault(),n.auth().signOut()},fetchData:function(){var e=this,t=this.$route.params.groupId;window.db.ref("groups").child(t).on("value",function(t){t.exists()&&(e.group=t.val(),e.userIsOwner=e.user&&e.group.owner===e.user.uid)}),window.db.ref("members").child(t).on("value",function(t){e.members=t.val()})},checkMembership:function(){var e=this;if(this.user){var t=this.$route.params.groupId;window.db.ref("members").child(t).child(this.user.uid).once("value",function(t){e.userIsMember=t.exists()})}},join:function(){var e=this.$route.params.groupId;window.db.ref("members").child(e).child(this.user.uid).set({displayName:this.user.displayName,photoURL:this.user.photoURL})},drawMatches:function(){}},render:function(e){return e("main",null,[this.group?e("div",{"class":"group-info"},[e("h1",null,[e("router-link",{attrs:{to:"/"}},["Monito Monita"])]),e("div",{"class":"name"},[this.group.name])]):e("div",{"class":"group-info"},[e("div",{"class":"spinner"},[])]),this.membersList.length>0?e("div",{"class":"group-members"},[e("ul",null,[this.membersList.map(function(t){return e("li",null,[e("img",{attrs:{src:t.photoURL}},[]),t.displayName])})])]):e("div",{"class":"group-members"},[e("div",{"class":"spinner"},[])]),this.group&&this.membersList.length>0?this.user?e("div",{"class":"form-box"},[this.userIsMember?this.userIsOwner?e("button",{on:{click:this.drawMatches}},["Draw matches"]):e("div",null,["Wait for it..."]):e("button",{on:{click:this.join}},["Join"]),e("small",null,["Logged in as ",this.user.displayName," — ",e("a",{attrs:{href:"#"},on:{click:this.logout}},["Logout"])])]):e("div",{"class":"form-box"},[e("button",{on:{click:this.login}},["Login with Facebook"])]):null,e("div",{"class":"invite-link"},[e("p",null,[e("small",null,["Invite your friends by sharing this url:"])]),e("pre",null,[e("code",null,[window.location.href])])])])}}}),require.register("js/components/index.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window,n=i.firebase;e["default"]={props:["user"],data:function(){return{groupName:""}},methods:{login:function(){var e=new n.auth.FacebookAuthProvider;n.auth().signInWithPopup(e)},logout:function(e){e.preventDefault(),n.auth().signOut()},createGroup:function(e){e.preventDefault();var t=window.db.ref("groups").push({name:this.groupName,owner:this.user.uid});window.db.ref("members").child(t.key).child(this.user.uid).set({displayName:this.user.displayName,photoURL:this.user.photoURL}),this.$router.push(t.key)}},render:function(e){var t=this;return e("main",null,[e("div",{"class":"intro-text"},[e("h1",null,["Monito Monita"]),e("p",null,["Monito Monita is what we call ",e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Secret_Santa"}},["Secret Santa"])," in the Philippines. This app allows you to organize your own Monito Monita in three easy steps:"]),e("ol",{"class":"steps-list"},[e("li",null,["Create a group"]),e("li",null,["Invite your friends"]),e("li",null,["Draw matches!"])])]),this.user?e("form",{"class":"form-box",on:{submit:this.createGroup}},[e("input",{attrs:{placeholder:"Group name",value:this.groupName},on:{input:function(e){t.groupName=e.target.value}}},[]),e("button",{attrs:{type:"submit",disabled:!this.groupName}},["Create group"]),e("small",null,["Logged in as ",this.user.displayName," — ",e("a",{attrs:{href:"#"},on:{click:this.logout}},["Logout"])])]):e("div",{"class":"form-box"},[e("button",{on:{click:this.login}},["Login with Facebook"])]),e("footer",null,[e("small",null,["Made by ",e("a",{attrs:{href:"https://marksteve.com"}},["marksteve"])])])])}}}),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,r){})}(),require("___globals___");