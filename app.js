!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},i={},s={}.hasOwnProperty,n=/^\.\.?(\/|$)/,o=function(e,t){for(var r,i=[],s=(n.test(t)?e+"/"+t:t).split("/"),o=0,u=s.length;o<u;o++)r=s[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},a=function(t){return function(r){var i=o(u(t),r);return e.require(i,t)}},l=function(e,t){var i=null;i=v&&v.createHot(e);var s={id:e,exports:{},hot:i};return r[e]=s,t(s.exports,a(e),s),s.exports},h=function(e){return i[e]?h(i[e]):e},c=function(e,t){return h(o(u(e),t))},d=function(e,i){null==i&&(i="/");var n=h(e);if(s.call(r,n))return r[n].exports;if(s.call(t,n))return l(n,t[n]);throw new Error("Cannot find module '"+e+"' from '"+i+"'")};d.alias=function(e,t){i[t]=e};var p=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,m=function(e){if(p.test(e)){var t=e.replace(p,"");s.call(i,t)&&i[t].replace(p,"")!==t+"/index"||(i[t]=e)}if(f.test(e)){var r=e.replace(f,"");s.call(i,r)||(i[r]=e)}};d.register=d.define=function(e,i){if("object"==typeof e)for(var n in e)s.call(e,n)&&d.register(n,e[n]);else t[e]=i,delete r[e],m(e)},d.list=function(){var e=[];for(var r in t)s.call(t,r)&&e.push(r);return e};var v=e._hmr&&new e._hmr(c,d,t,r);d._cache=r,d.hmr=v&&v.wrap,d.brunch=!0,e.require=d}}(),function(){var e;window;require.register("js/components/group.js",function(e,t,r){"use strict";function i(e){var t=0,r=0,i=null;for(t=e.length-1;t>0;t-=1)r=Math.floor(Math.random()*(t+1)),i=e[t],e[t]=e[r],e[r]=i}Object.defineProperty(e,"__esModule",{value:!0});var s=window,n=s.firebase;e["default"]={props:["user"],data:function(){return{group:null,members:{},membersList:[],userIsMember:!1,userIsOwner:!1,userMatch:null}},created:function(){this.fetchGroup(),this.fetchMatch()},watch:{user:function(){this.fetchMembership(),this.fetchMatch()},members:function(){this.fetchMembership()}},computed:{membersList:function(){var e=this;return this.members?Object.keys(this.members).map(function(t){return e.members[t]}):[]}},methods:{login:function(){var e=new n.auth.FacebookAuthProvider;n.auth().signInWithPopup(e)},logout:function(e){e.preventDefault(),n.auth().signOut()},fetchGroup:function(){var e=this,t=this.$route.params.groupId;window.db.ref("groups").child(t).on("value",function(t){t.exists()&&(e.group=t.val(),e.userIsOwner=e.user&&e.group.owner===e.user.uid)}),window.db.ref("members").child(t).on("value",function(t){e.members=t.val()})},fetchMembership:function(){var e=this;if(this.user){var t=this.$route.params.groupId;window.db.ref("members").child(t).child(this.user.uid).on("value",function(t){e.userIsMember=t.exists()})}},fetchMatch:function(){var e=this;if(this.user){var t=this.$route.params.groupId;window.db.ref("matches").child(t).child(this.user.uid).on("value",function(t){e.userMatch=t.val()})}},join:function(){var e=this.$route.params.groupId;window.db.ref("members").child(e).child(this.user.uid).set({uid:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL})},drawMatches:function(){var e=this.$route.params.groupId,t=this.membersList.slice();i(t);for(var r=0;r<t.length;)window.db.ref("matches").child(e).child(t[r++].uid).set(t[r%t.length])}},render:function(e){return e("main",null,[this.group?e("div",{"class":"group-info"},[e("h1",null,[e("router-link",{attrs:{to:"/"}},["Monito Monita"])]),e("div",{"class":"name"},[this.group.name])]):e("div",{"class":"group-info"},[e("div",{"class":"spinner"},[])]),this.membersList.length>0?e("div",{"class":"group-members"},[e("ul",null,[this.membersList.map(function(t){return e("li",null,[e("div",{"class":"photo"},[e("img",{attrs:{src:t.photoURL}},[])]),t.displayName])})])]):e("div",{"class":"group-members"},[e("div",{"class":"spinner"},[])]),this.group&&this.membersList.length>0?this.user?e("div",{"class":"form-box"},[this.userMatch?this.userIsMember?e("div",{"class":"user-match"},[e("p",null,["You've been matched with:"]),e("p",null,[e("div",{"class":"photo"},[e("img",{attrs:{src:this.userMatch.photoURL}},[])]),e("span",{"class":"name"},[this.userMatch.displayName])])]):e("p",null,["Matches have been drawn! You can't join this group anymore :("]):this.userIsMember?this.userIsOwner?e("button",{on:{click:this.drawMatches}},["Draw matches"]):e("div",null,["Waiting for your match…"]):e("button",{on:{click:this.join}},["Join"]),e("small",null,["Logged in as ",this.user.displayName," — ",e("a",{attrs:{href:"#"},on:{click:this.logout}},["Logout"])])]):e("div",{"class":"form-box"},[e("button",{on:{click:this.login}},["Login with Facebook"])]):null,e("div",{"class":"invite-link"},[e("p",null,[e("small",null,["Invite your friends by sharing this url:"])]),e("pre",null,[e("code",null,[e("a",{attrs:{href:window.location.href}},[window.location.href])])])])])}}}),require.register("js/components/index.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window,s=i.firebase;e["default"]={props:["user"],data:function(){return{groupName:""}},methods:{login:function(){var e=new s.auth.FacebookAuthProvider;s.auth().signInWithPopup(e)},logout:function(e){e.preventDefault(),s.auth().signOut()},createGroup:function(e){e.preventDefault();var t=window.db.ref("groups").push({name:this.groupName,owner:this.user.uid});window.db.ref("members").child(t.key).child(this.user.uid).set({uid:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL}),this.$router.push(t.key)}},render:function(e){var t=this;return e("main",null,[e("div",{"class":"intro-text"},[e("h1",null,["Monito Monita"]),e("p",null,["Monito Monita is what we call ",e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Secret_Santa"}},["Secret Santa"])," in the Philippines. This app allows you to organize your own Monito Monita in three easy steps:"]),e("ol",{"class":"steps-list"},[e("li",null,["Create a group"]),e("li",null,["Invite your friends"]),e("li",null,["Draw matches!"])])]),this.user?e("form",{"class":"form-box",on:{submit:this.createGroup}},[e("input",{attrs:{placeholder:"Group name",value:this.groupName},on:{input:function(e){t.groupName=e.target.value}}},[]),e("button",{attrs:{type:"submit",disabled:!this.groupName}},["Create group"]),e("small",null,["Logged in as ",this.user.displayName," — ",e("a",{attrs:{href:"#"},on:{click:this.logout}},["Logout"])])]):e("div",{"class":"form-box"},[e("button",{on:{click:this.login}},["Login with Facebook"])]),e("footer",null,[e("small",null,["Made by ",e("a",{attrs:{href:"https://marksteve.com"}},["marksteve"])])])])}}}),require.register("js/initialize.js",function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=t("vue"),n=i(s),o=t("vue-router"),u=i(o),a=t("vuefire"),l=i(a),h=t("./components/index"),c=i(h),d=t("./components/group"),p=i(d);n["default"].use(u["default"]),n["default"].use(l["default"]);var f=[{path:"/",component:c["default"]},{path:"/:groupId",component:p["default"]}],m=new u["default"]({routes:f}),v=new n["default"]({router:m,data:{user:null},render:function(e){return e("router-view",{attrs:{user:this.user}},[])}});window.firebase.auth().onAuthStateChanged(function(e){v.user=e}),v.$mount("#app")}),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,r){})}(),require("___globals___");